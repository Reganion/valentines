<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Valentine's Day üíñ</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
}

body{
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:linear-gradient(135deg,#ff9a9e,#fad0c4);
    font-family:'Segoe UI',sans-serif;
    overflow:hidden;
    position:relative;
    padding:15px;
}

/* Floating Hearts Background */
.heart{
    position:absolute;
    color:rgba(255,77,109,.15);
    animation:float 6s ease-in-out infinite;
    z-index:0;
}

@keyframes float{
    0%,100%{transform:translateY(0);}
    50%{transform:translateY(-20px);}
}

/* Main Container */
.container{
    background:#fff;
    width:100%;
    max-width:420px;
    padding:35px 25px;
    border-radius:22px;
    text-align:center;
    position:relative;
    z-index:1;
    box-shadow:0 15px 40px rgba(0,0,0,.15);
}

h1{
    color:#ff4d6d;
    margin-bottom:12px;
    font-size:clamp(1.6rem,5vw,2rem);
}

/* Slideshow */
.slideshow{
    position:relative;
    width:100%;
    max-width:280px;
    aspect-ratio:3/4;
    margin:20px auto;
    overflow:hidden;
    border-radius:16px;
    box-shadow:0 10px 20px rgba(0,0,0,.15);
}

.slideshow img{
    width:100%;
    height:100%;
    object-fit:cover;
    transition:opacity .6s ease;
}

.play-overlay{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:none;
    width:auto;
    height:auto;
    color:#ffffff;
    font-size:60px;
    cursor:pointer;
    transition:.3s ease;
    text-shadow:0 4px 15px rgba(0,0,0,0.6);
    user-select:none;
}

/* Hover effect */
.play-overlay:hover{
    transform:translate(-50%,-50%) scale(1.2);
    color:#ff4d6d;
}

/* Small Pause Button (top-right) */
.pause-btn{
    position:absolute;
    top:10px;
    right:10px;
    background:rgba(0,0,0,0.35);
    border:1px solid rgba(255,255,255,0.35);
    color:#fff;
    width:44px;
    height:44px;
    border-radius:999px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:18px;
    cursor:pointer;
    z-index:5;
    backdrop-filter: blur(6px);
    transition: .25s ease;
    user-select:none;

    opacity:0;               /* hidden until started */
    pointer-events:none;     /* disabled until started */
}
.pause-btn:hover{
    transform: scale(1.06);
    background:rgba(0,0,0,0.5);
}

/* Message Box */
.message{
    background:rgba(255,77,109,.06);
    border-radius:14px;
    padding:16px;
    color:#555;
    line-height:1.6;
    text-align:left;
    font-size:0.95rem;
}

.signature{
    margin-top:18px;
    color:#ff4d6d;
    font-weight:600;
}
</style>
</head>
<body>

<div id="hearts-container"></div>

<div class="container">
    <h1>You made my day! üíû</h1>

    <div class="slideshow">
        <img id="slideImage" src="images/1.jpeg" alt="Memories">

        <!-- Start button -->
        <div class="play-overlay" id="playButton">‚ñ∂</div>

        <!-- Pause/Resume button -->
        <div class="pause-btn" id="pauseButton" aria-label="Pause or Resume">‚è∏</div>
    </div>

    <div class="message">
        <p>As long as I‚Äôm here, I‚Äôll protect and cherish what we have. üíû</p>
        <p>Stay strong with me, and I promise I‚Äôll never stop loving you.</p>
    </div>

    <p class="signature">With all my heart üíñ</p>
</div>

<!-- IMPORTANT: removed loop so music can end -->
<audio id="bgMusic" src="music/palagi.mp3"></audio>

<script>
/* Floating Hearts */
const heartsContainer = document.getElementById("hearts-container");

for(let i=0;i<18;i++){
    const h=document.createElement("div");
    h.className="heart";
    h.innerHTML="‚ù§";
    h.style.left=Math.random()*100+"vw";
    h.style.top=Math.random()*100+"vh";
    h.style.fontSize=(14+Math.random()*18)+"px";
    heartsContainer.appendChild(h);
}

/* Elements */
const bgMusic = document.getElementById("bgMusic");
const slideImage = document.getElementById("slideImage");
const playButton = document.getElementById("playButton");
const pauseButton = document.getElementById("pauseButton");

const images=[
"images/1.jpeg","images/2.jpeg","images/3.jpeg","images/4.jpeg","images/5.jpeg",
"images/6.jpeg","images/7.jpeg","images/8.jpeg","images/9.jpeg","images/10.jpeg",
"images/11.jpeg","images/12.jpeg","images/13.jpeg","images/14.jpeg","images/15.jpeg",
"images/16.jpeg","images/17.jpeg","images/18.jpeg","images/19.jpeg","images/20.jpeg",
"images/21.jpeg","images/22.jpeg","images/23.jpeg","images/24.jpeg","images/25.jpeg",
"images/26.jpeg","images/27.jpeg","images/28.jpeg","images/29.jpeg","images/30.jpeg",
"images/31.jpeg","images/32.jpeg","images/33.jpeg","images/34.jpeg","images/35.jpeg",
"images/36.jpeg","images/37.jpeg"
];

let currentIndex = 0;
let slideshowInterval = null;
let isStarted = false;
let isPaused = false;

/* Start Slideshow */
function startSlideshow(){
    stopSlideshow(); // prevent duplicates
    slideshowInterval = setInterval(()=>{
        currentIndex = (currentIndex + 1) % images.length;

        slideImage.style.opacity = 0;

        setTimeout(()=>{
            slideImage.src = images[currentIndex];
            slideImage.style.opacity = 1;
        },300);

    },2500);
}

/* Stop Slideshow */
function stopSlideshow(){
    if(slideshowInterval){
        clearInterval(slideshowInterval);
        slideshowInterval = null;
    }
}

/* Heart Burst Effect */
function heartBurst(){
    for(let i=0;i<12;i++){
        setTimeout(()=>{
            const h=document.createElement("div");
            h.innerHTML="‚ù§";
            h.style.position="fixed";
            h.style.left="50%";
            h.style.top="50%";
            h.style.fontSize="26px";
            h.style.color="#ff4d6d";
            h.style.zIndex=9999;

            const x=(Math.random()*200-100);
            const y=(Math.random()*200-100);

            h.animate([
                {transform:"translate(0,0)",opacity:1},
                {transform:`translate(${x}px,${y}px)`,opacity:0}
            ],{duration:1000,easing:"ease-out"});

            document.body.appendChild(h);
            setTimeout(()=>h.remove(),1000);
        },i*70);
    }
}

/* Show pause button */
function enablePauseButton(){
    pauseButton.style.opacity = "1";
    pauseButton.style.pointerEvents = "auto";
}

/* Hide pause button */
function disablePauseButton(){
    pauseButton.style.opacity = "0";
    pauseButton.style.pointerEvents = "none";
}

/* Update pause icon */
function updatePauseIcon(){
    pauseButton.textContent = isPaused ? "‚ñ∂" : "‚è∏";
}

/* Start (first play) */
function startExperience(){
    isStarted = true;
    isPaused = false;
    updatePauseIcon();

    startSlideshow();
    heartBurst();

    bgMusic.volume = 0.7;
    bgMusic.currentTime = 0;
    bgMusic.play();

    enablePauseButton();

    playButton.style.opacity="0";
    setTimeout(()=>{
        playButton.style.display="none";
    },300);
}

/* Pause everything */
function pauseExperience(){
    isPaused = true;
    updatePauseIcon();
    bgMusic.pause();
    stopSlideshow();
}

/* Resume everything */
function resumeExperience(){
    isPaused = false;
    updatePauseIcon();
    bgMusic.play();
    startSlideshow();
}

/* Play Button Click */
playButton.addEventListener("click", ()=>{
    startExperience();
});

/* Pause Button Click */
pauseButton.addEventListener("click", ()=>{
    if(!isStarted) return;

    if(isPaused){
        resumeExperience();
    }else{
        pauseExperience();
    }
});

/* When music ends, stop slideshow too */
bgMusic.addEventListener("ended", ()=>{
    stopSlideshow();
    isPaused = true;
    updatePauseIcon();
    disablePauseButton(); // slideshow will stop and controls disappear
});
</script>

</body>
</html>
